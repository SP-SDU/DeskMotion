@page
@model DeskMotion.Pages.Admin.IndexModel

@{
    ViewData["Title"] = "Admin Dashboard";
    ViewData["ActivePage"] = ManageNavPages.Index;
}

<h1>Admin Dashboard</h1>

<div class="row">
    <div class="col-md-3">
        <div class="card text-white bg-primary mb-3">
            <div class="card-header">Total Desk Data Records</div>
            <div class="card-body">
                <h5 class="card-title">@Model.TotalDesks</h5>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-success mb-3">
            <div class="card-header">Total Desk Metadata Records</div>
            <div class="card-body">
                <h5 class="card-title">@Model.TotalMetadata</h5>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-info mb-3">
            <div class="card-header">Total Users</div>
            <div class="card-body">
                <h5 class="card-title">@Model.TotalUsers</h5>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-warning mb-3">
            <div class="card-header">Average Desk Usage Time</div>
            <div class="card-body">
                <h5 class="card-title">@Model.AverageDeskUsageTimeMinutes.ToString("F2") minutes</h5>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <h2>Desk Usage by Location</h2>
        <canvas id="deskUsageByLocationChart"
                data-chart-type="pie"
                data-chart-labels='@Html.Raw(Json.Serialize(Model.DeskUsageByLocationLabels))'
                data-chart-data='@Html.Raw(Json.Serialize(Model.DeskUsageByLocationData))'>
        </canvas>
    </div>
    <div class="col-md-6">
        <h2>User Registration Trends</h2>
        <canvas id="userActivityChart"
                data-chart-type="line"
                data-chart-label-text="User Registrations"
                data-chart-labels='@Html.Raw(Json.Serialize(Model.UserActivityLabels))'
                data-chart-data='@Html.Raw(Json.Serialize(Model.UserActivityData))'>
        </canvas>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <h2>Health Insights</h2>
        <canvas id="healthInsightsChart"
                data-chart-type="bar"
                data-chart-label-text="Health Status"
                data-chart-labels='@Html.Raw(Json.Serialize(Model.HealthInsightsLabels))'
                data-chart-data='@Html.Raw(Json.Serialize(Model.HealthInsightsData))'>
        </canvas>
    </div>
    <div class="col-md-6">
        <h2>Desk Height Over Time</h2>
        <canvas id="deskHeightOverTimeChart"
                data-chart-type="line"
                data-chart-label-text="Desk Height (cm)"
                data-chart-labels='@Html.Raw(Json.Serialize(Model.DeskHeightOverTimeLabels))'
                data-chart-data='@Html.Raw(Json.Serialize(Model.DeskHeightOverTimeData))'>
        </canvas>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="~/js/graphs.js"></script>
}
